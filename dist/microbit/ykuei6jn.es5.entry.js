var __awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};microbit.loadBundle("ykuei6jn",["exports","./chunk-ebf5a341.js"],function(e,t){var n=window.microbit.h,r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var o=a(function(e,t){var n,i=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},a=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceInformationUuid="0000180a-0000-1000-8000-00805f9b34fb",function(e){e.modelNumber="00002a24-0000-1000-8000-00805f9b34fb",e.serialNumber="00002a25-0000-1000-8000-00805f9b34fb",e.firmwareRevision="00002a26-0000-1000-8000-00805f9b34fb",e.hardwareRevision="00002a27-0000-1000-8000-00805f9b34fb",e.manufacturer="00002a29-0000-1000-8000-00805f9b34fb"}(n=t.DeviceInformationCharacteristic||(t.DeviceInformationCharacteristic={}));var o=function(){function e(e){this.service=e}return e.createService=function(n){var r=n.find(function(e){return e.uuid===t.DeviceInformationUuid});if(r)return new e(r)},e.prototype.readDeviceInformation=function(){return i(this,void 0,void 0,function(){var e,t,r,i,o,c,s,u,l,f,h,d;return a(this,function(a){switch(a.label){case 0:return[4,this.service.getCharacteristics()];case 1:return e=a.sent(),t={},(r=e.find(function(e){return e.uuid===n.modelNumber}))?(i=t,[4,this.readStringCharacteristic(r)]):[3,3];case 2:i.modelNumber=a.sent(),a.label=3;case 3:return(o=e.find(function(e){return e.uuid===n.serialNumber}))?(c=t,[4,this.readStringCharacteristic(o)]):[3,5];case 4:c.serialNumber=a.sent(),a.label=5;case 5:return(s=e.find(function(e){return e.uuid===n.firmwareRevision}))?(u=t,[4,this.readStringCharacteristic(s)]):[3,7];case 6:u.firmwareRevision=a.sent(),a.label=7;case 7:return(l=e.find(function(e){return e.uuid===n.hardwareRevision}))?(f=t,[4,this.readStringCharacteristic(l)]):[3,9];case 8:f.hardwareRevision=a.sent(),a.label=9;case 9:return(h=e.find(function(e){return e.uuid===n.manufacturer}))?(d=t,[4,this.readStringCharacteristic(h)]):[3,11];case 10:d.manufacturer=a.sent(),a.label=11;case 11:return[2,t]}})})},e.prototype.readStringCharacteristic=function(e){return i(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return[4,e.readValue()];case 1:return t=r.sent(),n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),[2,String.fromCharCode.apply(null,Array.from(new Uint8Array(n)))]}})})},e}();t.DeviceInformationService=o});function c(){}function s(){s.init.call(this)}function u(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=new c,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=u(e))&&i>0&&o.length>i){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,s=l,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=n,++e._eventsCount;return e}function f(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function h(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function d(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}i(o),c.prototype=Object.create(null),s.EventEmitter=s,s.usingDomains=!1,s.prototype.domain=void 0,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.init=function(){this.domain=null,s.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new c,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(e){var t,n,r,i,a,o,c,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(c=this.domain,s){if(t=arguments[1],!c){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=c,t.domainThrown=!1,c.emit("error",t),!1}if(!(n=o[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=d(e,r),a=0;a<r;++a)i[a].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=d(e,i),o=0;o<i;++o)a[o].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=d(e,a),c=0;c<a;++c)o[c].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,c=d(e,o),s=0;s<o;++s)c[s].call(n,r,i,a)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=d(e,i),o=0;o<i;++o)a[o].apply(n,r)}(n,l,this,i)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new c:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new c,this;delete r[e]}else!function(e,t){for(var n=i,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}(n);r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new c,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new c:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new c,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},s.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var v=a(function(e,t){var n,i=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isEventListenerObject=function(e){return void 0!==e.handleEvent},t}return i(t,e),t.prototype.addEventListener=function(t,n){if(n){var r=this.isEventListenerObject(n)?n.handleEvent:n;e.prototype.addListener.call(this,t,r)}},t.prototype.removeEventListener=function(t,n){if(n){var r=this.isEventListenerObject(n)?n.handleEvent:n;e.prototype.removeListener.call(this,t,r)}},t.prototype.dispatchEvent=function(t,n){var r;return r="string"==typeof t?new CustomEvent(t,{detail:n}):t,e.prototype.emit.call(this,r.type,r)},t}(s.EventEmitter);t.EventDispatcher=a});i(v);var p=a(function(e,t){var n,i,a=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},c=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonUuid="e95d9882-251d-470a-a062-fa1922dfa9a8",function(e){e.buttonAState="e95dda90-251d-470a-a062-fa1922dfa9a8",e.buttonBState="e95dda91-251d-470a-a062-fa1922dfa9a8"}(i=t.ButtonCharacteristic||(t.ButtonCharacteristic={})),function(e){e[e.Release=0]="Release",e[e.ShortPress=1]="ShortPress",e[e.LongPress=2]="LongPress"}(t.ButtonState||(t.ButtonState={}));var s=function(e){function n(t){var n=e.call(this)||this;return n.service=t,n}return a(n,e),n.createService=function(e){return o(this,void 0,void 0,function(){var r,i;return c(this,function(a){switch(a.label){case 0:return(r=e.find(function(e){return e.uuid===t.ButtonUuid}))?[4,(i=new n(r)).init()]:[2,void 0];case 1:return a.sent(),[2,i]}})})},n.prototype.init=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.service.getCharacteristic(i.buttonAState)];case 1:return[4,e.sent().startNotifications()];case 2:return e.sent(),[4,this.service.getCharacteristic(i.buttonBState)];case 3:return[4,e.sent().startNotifications()];case 4:return e.sent(),this.on("newListener",this.onNewListener.bind(this)),this.on("removeListener",this.onRemoveListener.bind(this)),[2]}})})},n.prototype.readButtonAState=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.buttonAState)];case 1:return[2,e.sent().getUint8(0)]}})})},n.prototype.readButtonBState=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.buttonBState)];case 1:return[2,e.sent().getUint8(0)]}})})},n.prototype.getCharacteristValue=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.service];case 1:return[4,t.sent().getCharacteristic(e)];case 2:return[4,t.sent().readValue()];case 3:return[2,t.sent()]}})})},n.prototype.onNewListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"buttonastatechanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.buttonAState)];case 1:t.sent().addEventListener("characteristicvaluechanged",this.buttonAStateChangedHandler.bind(this)),t.label=2;case 2:return"buttonbstatechanged"!==e?[3,4]:[4,this.service.getCharacteristic(i.buttonBState)];case 3:t.sent().addEventListener("characteristicvaluechanged",this.buttonBStateChangedHandler.bind(this)),t.label=4;case 4:return[2]}})})},n.prototype.onRemoveListener=function(e){return o(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return this.listenerCount(e)>0?[2]:"buttonastatechanged"!==e?[3,4]:[4,this.service];case 1:return[4,n.sent().getCharacteristic(i.buttonAState)];case 2:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.buttonAStateChangedHandler.bind(this)),[4,t.stopNotifications()];case 3:n.sent(),n.label=4;case 4:return"buttonbstatechanged"!==e?[3,8]:[4,this.service];case 5:return[4,n.sent().getCharacteristic(i.buttonBState)];case 6:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.buttonBStateChangedHandler.bind(this)),[4,t.stopNotifications()];case 7:n.sent(),n.label=8;case 8:return[2]}})})},n.prototype.buttonAStateChangedHandler=function(e){this.dispatchEvent("buttonastatechanged",e.target.value.getUint8(0))},n.prototype.buttonBStateChangedHandler=function(e){this.dispatchEvent("buttonbstatechanged",e.target.value.getUint8(0))},n}(v.EventDispatcher);t.ButtonService=s});i(p);var b=a(function(e,t){var n,i=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},a=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LedUuid="e95dd91d-251d-470a-a062-fa1922dfa9a8",function(e){e.ledMatrixState="e95d7b77-251d-470a-a062-fa1922dfa9a8",e.ledText="e95d93ee-251d-470a-a062-fa1922dfa9a8",e.scrollingDelay="e95d0d2d-251d-470a-a062-fa1922dfa9a8"}(n=t.LedCharacteristic||(t.LedCharacteristic={}));var o=function(){function e(e){this.service=e}return e.createService=function(n){var r=n.find(function(e){return e.uuid===t.LedUuid});if(r)return new e(r)},e.prototype.writeText=function(e){return i(this,void 0,void 0,function(){var t,r;return a(this,function(i){switch(i.label){case 0:return[4,this.service.getCharacteristic(n.ledText)];case 1:return t=i.sent(),r=this.encodeString(e),[2,t.writeValue(r)]}})})},e.prototype.getMatrixState=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(n.ledMatrixState)];case 1:return e=t.sent(),[2,this.viewToLedMatrix(e)]}})})},e.prototype.setMatrixState=function(e){return i(this,void 0,void 0,function(){var t,r;return a(this,function(i){switch(i.label){case 0:return[4,this.service.getCharacteristic(n.ledMatrixState)];case 1:return t=i.sent(),r=this.ledMatrixToView(e),[2,t.writeValue(r)]}})})},e.prototype.getScrollingDelay=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(n.scrollingDelay)];case 1:return[2,e.sent().getUint16(0,!0)]}})})},e.prototype.setScrollingDelay=function(e){return i(this,void 0,void 0,function(){var t,r;return a(this,function(i){switch(i.label){case 0:return[4,this.service.getCharacteristic(n.scrollingDelay)];case 1:return t=i.sent(),(r=new DataView(new ArrayBuffer(2))).setUint16(0,e,!0),[2,t.writeValue(r)]}})})},e.prototype.getCharacteristValue=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.service.getCharacteristic(e)];case 1:return[4,t.sent().readValue()];case 2:return[2,t.sent()]}})})},e.prototype.encodeString=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},e.prototype.viewToLedMatrix=function(e){for(var t=[],n=0;n<5;n++)t[n]=this.byteToBoolArray(e.getUint8(n));return t},e.prototype.byteToBoolArray=function(e){for(var t=[!1,!1,!1,!1,!1],n=0;n<t.length;n++)t[n]=1==(1&e),e>>=1;return t.reverse()},e.prototype.ledMatrixToView=function(e){for(var t=new DataView(new ArrayBuffer(5)),n=0;n<5;n++)t.setUint8(n,this.boolArrayToByte(e[n]));return t},e.prototype.boolArrayToByte=function(e){return e.reduce(function(e,t){return e<<1|(t?1:0)},0)},e}();t.LedService=o});i(b);var y=a(function(e,t){var n,i,a=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},c=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TemperatureUuid="e95d6100-251d-470a-a062-fa1922dfa9a8",function(e){e.temperature="e95d9250-251d-470a-a062-fa1922dfa9a8",e.temperaturePeriod="e95d1b25-251d-470a-a062-fa1922dfa9a8"}(i=t.TemperatureCharacteristic||(t.TemperatureCharacteristic={}));var s=function(e){function n(t){var n=e.call(this)||this;return n.service=t,n}return a(n,e),n.createService=function(e){return o(this,void 0,void 0,function(){var r,i;return c(this,function(a){switch(a.label){case 0:return(r=e.find(function(e){return e.uuid===t.TemperatureUuid}))?[4,(i=new n(r)).init()]:[2,void 0];case 1:return a.sent(),[2,i]}})})},n.prototype.init=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.service.getCharacteristic(i.temperature)];case 1:return[4,e.sent().startNotifications()];case 2:return e.sent(),this.on("newListener",this.onNewListener.bind(this)),this.on("removeListener",this.onRemoveListener.bind(this)),[2]}})})},n.prototype.readTemperature=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.temperature)];case 1:return[2,e.sent().getInt8(0)]}})})},n.prototype.getTemperaturePeriod=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.temperaturePeriod)];case 1:return[2,e.sent().getUint16(0,!0)]}})})},n.prototype.setTemperaturePeriod=function(e){return o(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return[4,this.service.getCharacteristic(i.temperaturePeriod)];case 1:return t=r.sent(),(n=new DataView(new ArrayBuffer(2))).setUint16(0,e,!0),[2,t.writeValue(n)]}})})},n.prototype.getCharacteristValue=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.service.getCharacteristic(e)];case 1:return[4,t.sent().readValue()];case 2:return[2,t.sent()]}})})},n.prototype.onNewListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"temperaturechanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.temperature)];case 1:t.sent().addEventListener("characteristicvaluechanged",this.temperatureChangedHandler.bind(this)),t.label=2;case 2:return[2]}})})},n.prototype.onRemoveListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"temperaturechanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.temperature)];case 1:t.sent().removeEventListener("characteristicvaluechanged",this.temperatureChangedHandler.bind(this)),t.label=2;case 2:return[2]}})})},n.prototype.temperatureChangedHandler=function(e){this.dispatchEvent("temperaturechanged",e.target.value.getInt8(0))},n}(v.EventDispatcher);t.TemperatureService=s});i(y);var g=a(function(e,t){var n,i,a=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},c=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccelerometerUuid="e95d0753-251d-470a-a062-fa1922dfa9a8",function(e){e.accelerometerData="e95dca4b-251d-470a-a062-fa1922dfa9a8",e.accelerometerPeriod="e95dfb24-251d-470a-a062-fa1922dfa9a8"}(i=t.AccelerometerCharacteristic||(t.AccelerometerCharacteristic={}));var s=function(e){function n(t){var n=e.call(this)||this;return n.service=t,n}return a(n,e),n.createService=function(e){return o(this,void 0,void 0,function(){var r,i;return c(this,function(a){switch(a.label){case 0:return(r=e.find(function(e){return e.uuid===t.AccelerometerUuid}))?[4,(i=new n(r)).init()]:[2,void 0];case 1:return a.sent(),[2,i]}})})},n.prototype.init=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.service.getCharacteristic(i.accelerometerData)];case 1:return[4,e.sent().startNotifications()];case 2:return e.sent(),this.on("newListener",this.onNewListener.bind(this)),this.on("removeListener",this.onRemoveListener.bind(this)),[2]}})})},n.prototype.readAccelerometerData=function(){return o(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(i.accelerometerData)];case 1:return e=t.sent(),[2,this.dataViewToAccelerometerData(e)]}})})},n.prototype.getAccelerometerPeriod=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.accelerometerPeriod)];case 1:return[2,e.sent().getUint16(0,!0)]}})})},n.prototype.setAccelerometerPeriod=function(e){return o(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return[4,this.service.getCharacteristic(i.accelerometerPeriod)];case 1:return t=r.sent(),(n=new DataView(new ArrayBuffer(2))).setUint16(0,e,!0),[2,t.writeValue(n)]}})})},n.prototype.getCharacteristValue=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.service.getCharacteristic(e)];case 1:return[4,t.sent().readValue()];case 2:return[2,t.sent()]}})})},n.prototype.onNewListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"accelerometerdatachanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.accelerometerData)];case 1:t.sent().addEventListener("characteristicvaluechanged",this.accelerometerDataChangedHandler.bind(this)),t.label=2;case 2:return[2]}})})},n.prototype.onRemoveListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"accelerometerdatachanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.accelerometerData)];case 1:t.sent().removeEventListener("characteristicvaluechanged",this.accelerometerDataChangedHandler.bind(this)),t.label=2;case 2:return[2]}})})},n.prototype.accelerometerDataChangedHandler=function(e){var t=this.dataViewToAccelerometerData(e.target.value);this.dispatchEvent("accelerometerdatachanged",t)},n.prototype.dataViewToAccelerometerData=function(e){return{x:e.getInt16(0,!0)/1e3,y:e.getInt16(2,!0)/1e3,z:e.getInt16(4,!0)/1e3}},n}(v.EventDispatcher);t.AccelerometerService=s});i(g);var m=a(function(e,t){var n,i,a=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},c=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MagnetometerUuid="e95df2d8-251d-470a-a062-fa1922dfa9a8",function(e){e.magnetometerData="e95dfb11-251d-470a-a062-fa1922dfa9a8",e.magnetometerPeriod="e95d386c-251d-470a-a062-fa1922dfa9a8",e.magnetometerBearing="e95d9715-251d-470a-a062-fa1922dfa9a8",e.magnetometerCalibration="e95db358-251d-470a-a062-fa1922dfa9a8"}(i=t.MagnetometerCharacteristic||(t.MagnetometerCharacteristic={}));var s=function(e){function n(t){var n=e.call(this)||this;return n.service=t,n}return a(n,e),n.createService=function(e){return o(this,void 0,void 0,function(){var r,i;return c(this,function(a){switch(a.label){case 0:return(r=e.find(function(e){return e.uuid===t.MagnetometerUuid}))?[4,(i=new n(r)).init()]:[2,void 0];case 1:return a.sent(),[2,i]}})})},n.prototype.init=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.service.getCharacteristic(i.magnetometerData)];case 1:return[4,e.sent().startNotifications()];case 2:return e.sent(),this.on("newListener",this.onNewListener.bind(this)),this.on("removeListener",this.onRemoveListener.bind(this)),[2]}})})},n.prototype.readMagnetometerData=function(){return o(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(i.magnetometerData)];case 1:return e=t.sent(),[2,this.dataViewToMagnetometerData(e)]}})})},n.prototype.getMagnetometerBearing=function(){return o(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(i.magnetometerBearing)];case 1:return 2===(e=t.sent()).byteLength?[2,e.getUint16(0,!0)]:[2,void 0]}})})},n.prototype.getMagnetometerPeriod=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.getCharacteristValue(i.magnetometerPeriod)];case 1:return[2,e.sent().getUint16(0,!0)]}})})},n.prototype.setMagnetometerPeriod=function(e){return o(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return[4,this.service.getCharacteristic(i.magnetometerPeriod)];case 1:return t=r.sent(),(n=new DataView(new ArrayBuffer(2))).setUint16(0,e,!0),[2,t.writeValue(n)]}})})},n.prototype.getCharacteristValue=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.service.getCharacteristic(e)];case 1:return[4,t.sent().readValue()];case 2:return[2,t.sent()]}})})},n.prototype.onNewListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"magnetometerdatachanged"!==e?[3,2]:[4,this.service.getCharacteristic(i.magnetometerData)];case 1:t.sent().addEventListener("characteristicvaluechanged",this.magnetometerDataChangedHandler.bind(this)),t.label=2;case 2:return"magnetometerbearingchanged"!==e?[3,4]:[4,this.service.getCharacteristic(i.magnetometerBearing)];case 3:t.sent().addEventListener("characteristicvaluechanged",this.magnetometerBearingChangedHandler.bind(this)),t.label=4;case 4:return[2]}})})},n.prototype.onRemoveListener=function(e){return o(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return this.listenerCount(e)>0?[2]:"magnetometerdatachanged"!==e?[3,3]:[4,this.service.getCharacteristic(i.magnetometerData)];case 1:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.magnetometerDataChangedHandler.bind(this)),[4,t.stopNotifications()];case 2:n.sent(),n.label=3;case 3:return"magnetometerbearingchanged"!==e?[3,6]:[4,this.service.getCharacteristic(i.magnetometerBearing)];case 4:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.magnetometerBearingChangedHandler.bind(this)),[4,t.stopNotifications()];case 5:n.sent(),n.label=6;case 6:return[2]}})})},n.prototype.magnetometerDataChangedHandler=function(e){var t=this.dataViewToMagnetometerData(e.target.value);this.dispatchEvent("magnetometerdatachanged",t)},n.prototype.magnetometerBearingChangedHandler=function(e){var t=e.target.value;2===t.byteLength&&this.dispatchEvent("magnetometerbearingchanged",t.getUint16(0,!0))},n.prototype.dataViewToMagnetometerData=function(e){return{x:e.getInt16(0,!0),y:e.getInt16(1,!0),z:e.getInt16(2,!0)}},n}(v.EventDispatcher);t.MagnetometerService=s});i(m);var w=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IoPinUuid="e95d127b-251d-470a-a062-fa1922dfa9a8",function(e){e.pinData="e95d8d00-251d-470a-a062-fa1922dfa9a8",e.pinAdConfiguration="e95d5899-251d-470a-a062-fa1922dfa9a8",e.pinIoConfiguration="e95db9fe-251d-470a-a062-fa1922dfa9a8",e.pwmControl="e95dd822-251d-470a-a062-fa1922dfa9a8"}(t.IoPinCharacteristic||(t.IoPinCharacteristic={}))});i(w);var _=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UartUuid="6e400001-b5a3-f393-e0a9-e50e24dcca9e",function(e){e.tx="6e400002-b5a3-f393-e0a9-e50e24dcca9e",e.rx="6e400003-b5a3-f393-e0a9-e50e24dcca9e"}(t.UartCharacteristic||(t.UartCharacteristic={}))});i(_);var C=a(function(e,t){var n,i,a=r&&r.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},c=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventUuid="e95d93af-251d-470a-a062-fa1922dfa9a8",function(e){e.microBitRequirements="e95db84c-251d-470a-a062-fa1922dfa9a8",e.microBitEvent="e95d9775-251d-470a-a062-fa1922dfa9a8",e.clientRequirements="e95d23c4-251d-470a-a062-fa1922dfa9a8",e.clientEvent="e95d5404-251d-470a-a062-fa1922dfa9a8"}(i=t.EventCharacteristic||(t.EventCharacteristic={}));var s=function(e){function n(t){var n=e.call(this)||this;return n.service=t,n}return a(n,e),n.createService=function(e){return o(this,void 0,void 0,function(){var r,i;return c(this,function(a){switch(a.label){case 0:return(r=e.find(function(e){return e.uuid===t.EventUuid}))?[4,(i=new n(r)).init()]:[2,void 0];case 1:return a.sent(),[2,i]}})})},n.prototype.init=function(){return o(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.service.getCharacteristic(i.microBitEvent)];case 1:return[4,e.sent().startNotifications()];case 2:return e.sent(),this.on("newListener",this.onNewListener.bind(this)),this.on("removeListener",this.onRemoveListener.bind(this)),[2]}})})},n.prototype.getMicrobitRequirements=function(){return o(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(i.microBitRequirements)];case 1:return e=t.sent(),[2,this.viewToMicrobitEvent(e)]}})})},n.prototype.setClientRequirements=function(e,t){return o(this,void 0,void 0,function(){var n,r;return c(this,function(a){switch(a.label){case 0:return[4,this.service.getCharacteristic(i.clientRequirements)];case 1:return n=a.sent(),(r=new DataView(new ArrayBuffer(4))).setUint16(0,e,!0),r.setUint16(1,t,!0),[2,n.writeValue(r)]}})})},n.prototype.readMicrobitEvent=function(){return o(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.getCharacteristValue(i.microBitEvent)];case 1:return e=t.sent(),[2,this.viewToMicrobitEvent(e)]}})})},n.prototype.writeClientEvent=function(e,t){return o(this,void 0,void 0,function(){var n,r;return c(this,function(a){switch(a.label){case 0:return[4,this.service.getCharacteristic(i.clientEvent)];case 1:return n=a.sent(),(r=new DataView(new ArrayBuffer(4))).setUint16(0,e,!0),r.setUint16(1,t,!0),[2,n.writeValue(r)]}})})},n.prototype.getCharacteristValue=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.service.getCharacteristic(e)];case 1:return[4,t.sent().readValue()];case 2:return[2,t.sent()]}})})},n.prototype.onNewListener=function(e){return o(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.listenerCount(e)>0?[2]:"microbitevent"!==e?[3,2]:[4,this.service.getCharacteristic(i.microBitEvent)];case 1:t.sent().addEventListener("characteristicvaluechanged",this.eventHandler.bind(this)),t.label=2;case 2:return"microbitrequirementschanged"!==e?[3,4]:[4,this.service.getCharacteristic(i.microBitRequirements)];case 3:t.sent().addEventListener("characteristicvaluechanged",this.microbitRequirementsChangedHandler.bind(this)),t.label=4;case 4:return[2]}})})},n.prototype.onRemoveListener=function(e){return o(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return this.listenerCount(e)>0?[2]:"microbitevent"!==e?[3,3]:[4,this.service.getCharacteristic(i.microBitEvent)];case 1:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.eventHandler.bind(this)),[4,t.stopNotifications()];case 2:n.sent(),n.label=3;case 3:return"microbitrequirementschanged"!==e?[3,6]:[4,this.service.getCharacteristic(i.microBitRequirements)];case 4:return(t=n.sent()).removeEventListener("characteristicvaluechanged",this.microbitRequirementsChangedHandler.bind(this)),[4,t.stopNotifications()];case 5:n.sent(),n.label=6;case 6:return[2]}})})},n.prototype.microbitRequirementsChangedHandler=function(e){var t=this.viewToMicrobitEvent(e.target.value);this.dispatchEvent("microbitrequirementschanged",t)},n.prototype.eventHandler=function(e){var t=this.viewToMicrobitEvent(e.target.value);this.dispatchEvent("microbitevent",t)},n.prototype.viewToMicrobitEvent=function(e){return{type:e.getUint16(0,!0),value:e.getUint16(1,!0)}},n}(v.EventDispatcher);t.EventService=s});i(C);var L=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DfuUuid="e95d93b0-251d-470a-a062-fa1922dfa9a8",(t.DfuCharacteristic||(t.DfuCharacteristic={})).dfuControl="e95d93b1-251d-470a-a062-fa1922dfa9a8"});i(L);var S=a(function(e,t){var n=r&&r.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function c(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,c)}s((r=r.apply(e,t||[])).next())})},i=r&&r.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=r;Object.defineProperty(t,"__esModule",{value:!0}),t.requestMicrobit=function(e){return n(a,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,e.requestDevice({filters:[{namePrefix:"BBC micro:bit"}],optionalServices:[o.DeviceInformationUuid,p.ButtonUuid,b.LedUuid,y.TemperatureUuid,g.AccelerometerUuid,m.MagnetometerUuid,w.IoPinUuid,_.UartUuid,C.EventUuid,L.DfuUuid]})];case 1:return[2,t.sent()]}})})},t.getServices=function(e){return n(a,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return e&&e.gatt?e.gatt.connected?[3,2]:[4,e.gatt.connect()]:[2,{}];case 1:r.sent(),r.label=2;case 2:return[4,e.gatt.getPrimaryServices()];case 3:return t=r.sent(),n={},[4,o.DeviceInformationService.createService(t)];case 4:return n.deviceInformationService=r.sent(),[4,p.ButtonService.createService(t)];case 5:return n.buttonService=r.sent(),[4,b.LedService.createService(t)];case 6:return n.ledService=r.sent(),[4,y.TemperatureService.createService(t)];case 7:return n.temperatureService=r.sent(),[4,g.AccelerometerService.createService(t)];case 8:return n.accelerometerService=r.sent(),[4,m.MagnetometerService.createService(t)];case 9:return n.magnetometerService=r.sent(),[4,C.EventService.createService(t)];case 10:return n.eventService=r.sent(),[2,n]}})})}});i(S);var E=a(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(S)});i(E);var x=E.getServices,D=E.requestMicrobit,P=function(){function e(){this.device=void 0,this.connectLabel="Connect",this.disconnectLabel="Disconnect"}return e.prototype.render=function(){var e=this;return n("button",{onClick:function(){return e.connectDisconnect()}},this.getLabel())},e.prototype.getLabel=function(){return this.device?this.disconnectLabel:this.connectLabel},e.prototype.connectDisconnect=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(r){switch(r.label){case 0:return this.device?this.device.gatt.connected?[4,this.device.gatt.disconnect()]:[3,2]:[3,3];case 1:r.sent(),r.label=2;case 2:return this.setDevice(void 0),this.setServices(void 0),this.setDeviceInformation(void 0),[2];case 3:return[4,D(window.navigator.bluetooth)];case 4:return(e=r.sent())?(this.setDevice(e),[4,x(e)]):[3,7];case 5:return t=r.sent(),this.setServices(t),t.deviceInformationService?[4,t.deviceInformationService.readDeviceInformation()]:[3,7];case 6:n=r.sent(),this.setDeviceInformation(n),r.label=7;case 7:return[2]}})})},Object.defineProperty(e,"is",{get:function(){return"microbit-connect"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{connectLabel:{type:String,attr:"connect-label"},device:{type:"Any",attr:"device"},disconnectLabel:{type:String,attr:"disconnect-label"},el:{elementRef:!0},setDevice:{type:"Any",attr:"set-device"},setDeviceInformation:{type:"Any",attr:"set-device-information"},setServices:{type:"Any",attr:"set-services"}}},enumerable:!0,configurable:!0}),e}();t.DeviceTunnel.injectProps(P,["device","setDevice","setServices","setDeviceInformation"]),e.MicrobitConnect=P,Object.defineProperty(e,"__esModule",{value:!0})});